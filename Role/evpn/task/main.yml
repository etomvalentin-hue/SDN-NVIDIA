# roles/evpn/tasks/main.yml
---
- name: Configure EVPN VRF
  template:
    src: evpn_vrf.j2
    dest: "/etc/frr/evpn_vrf_{{ item.name }}.conf"
  loop: "{{ evpn_vrfs }}"

- name: Configure L2VPN EVPN
  template:
    src: l2vpn_evpn.j2
    dest: /etc/frr/l2vpn_evpn.conf

- name: Configure VXLAN instances
  template:
    src: vxlan.j2
    dest: "/etc/network/interfaces.d/vxlan_{{ item.vni }}"
  loop: "{{ vxlan_instances }}"